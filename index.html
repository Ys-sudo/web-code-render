
<!DOCTYPE html>
<html lang="en">
<head>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Coding Platform</title>
  <link rel="shortcut icon" type="image/png" href="https://theturtle.gr/wp-content/uploads/2019/11/htmllogo.png"/>
  <style>
   @import url('https://fonts.googleapis.com/css?family=Monofett&display=swap');
    @import url('https://fonts.googleapis.com/css?family=Bangers&display=swap');

    body {
        background-color: white;
        overflow-x:hidden;
    }
    
    ::-webkit-scrollbar{
  width: 4px;
  height: 4px;
}

::-webkit-scrollbar-thumb{
  background-color: #f06292;
  border-radius: 6px;
}
    
    
    a {
      color: whitesmoke;
    }
    a:hover {
      color: cyan;
    }
    a:visited {
      color: cyan;
    }
    #date{
      color: #333333;
      position: absolute;
      left:2%;
      font-family: 'Bangers', cursive;
      font-size: 15px;
      z-index: 200;

    }
    #time{
      color: #333333;
      position: absolute;
      top: 25px;
      left:2%;
      font-family: 'Bangers', cursive;
      font-size: 15px;
      z-index: 200;

    }
    


    #title{
      font-family: 'Monofett';
      top: -3%;
      position: absolute;
      left: 5%;
      color: white;
      font-size: 50px;

    }
    
    #aceEditor {
        padding-top: 10px;
        position: absolute;
        top: 81%;
        bottom: 0;
        left: 0px;
        right: 0px;
        width: 100%;
        height: 100%;

    }

    #b2{
      position: absolute;
      background-color: black;
      color: white;
      top:0%;
      height: 30px;
      z-index: 221;
      width:100px;
      right:0px;
      font-family: courier;
      border-radius: 10px;
      
    }
#b2:hover{
  color: cyan;
  cursor: pointer;
  border-radius: 20px;
}
    textarea{
      border-width: 0px;
      resize: both;
    }
    #box{
      margin: 0;
      top:10%;
      position: absolute;
      z-index: 11;
      left:0%;
      width: 110%;
      left:-5%;
      height: 70%;
      
      right: 23%;
      overflow: scroll;
      border: 1px solid white;


    }


    #box1{
      margin: 0;
      color: cyan;
      position: absolute;
      z-index: 11;
      left:0%;
      width: 70%;
      height: 50%;
      background-color: black;
      right: 23%;
      top: 120%;
      font-family: courier;
      font-size: 12px;
      overflow: scroll;
      border: 1px solid white;

    }




   iframe{
     resize: both;
     zoom: 0.90;
     width: 99% !important;
     padding-left:5%;
     -moz-transform:scale(0.95);
     -moz-transform-origin: 0 0;
     -webkit-transform:scale(0.95;
     -webkit-transform-origin: 0 0;
     -o-transform:scale(0.95);
     -o-transform-origin: 0 0;
     -ms-transform:scale(0.95);
    
   }
   #desc{
       position: absolute;
       background-color: black;
       color: white;
       border: 1px solid white;
       width: 50%;
       height: 10.5%;
       left: 0%;
       top: 130%;


   }
   #name{
       position: absolute;
       background-color: black;
       color: white;
       top: 130%;
       border: 1px solid white;
       height: 10.5%;
       left: 50%;
       width: 20%;

   }

   #publish{
       position: absolute;
       background-color: black;
       color: white;
       border: 1px solid white;
       height: 11.2%;
       top: 130%;
       left: 85%;
       width: 15%;
   }
   #preview{
       position: absolute;
       background-color: black;
       color: white;
       border: 1px solid white;
       height: 11.2%;
       top: 135%;
       left: 70%;
       width: 15%;
   }
   #lina{
       position: absolute;
       top:145%;
       width: 100%;


   }
   #out{
       position: absolute;
       top: 150%;
       left: 5%;
       z-index: 111;
       color: white;
   }
   #descout{
       position: absolute;
       top: 155%;
       left: 5%;
       color: white;
       font-size: 10px;
       margin-top: 10px;
   }
   #entries{
     font-family: 'Monofett';
     position: absolute;
     top: 155%;
     color: white;
     font-size: 50px;
     left: 37%;

   }
   #archive{

     top: 185%;
     position:absolute;
     width:100%;
     height:100%;
     left:2%;

     z-index:110;
     overflow: scroll;

   }
   #descarch{
     width: 50%;
     height: 21%;
     position: absolute;
     top: 170%;
     left: 3%;
     color: white;
     font-size: 15px;
     font-family: 'Courier';
     z-index: 110;
   }
    
    
   
scrollbar { 
    display: none; 
}</style>
  
  <script>


 // RENDER FUNCTION - upper right window
  function render(){
  
  
  var editor = ace.edit("aceEditor");
  var code =editor.getValue();
    
   var inp = document.getElementById("box1");
    
    box1.innerHTML = code;
    console.log(code);
    console.log(inp);

    
    var output     = document.getElementById("box");
  	var data = `
  <svg xmlns="http://www.w3.org/2000/svg" width="${inp.offsetWidth*1.5}" height="${inp.offsetHeight*1.5}">
  <foreignObject width="99%" height="99%">
  <div xmlns="http://www.w3.org/1999/xhtml">
  ${inp.value}
  </div>
  </foreignObject>
  </svg>`;
    var blob = new Blob( [data], {type:'image/svg+xml'} );
  	var url=URL.createObjectURL(blob);
  	output.src= url;
    console.log(url);



 // ResizeObserver
   }
   onload=function(){
    render();
    ro = new ResizeObserver(render);
  	ro.observe(document.getElementById("box1"));

   }


  </script>
</head>
<body>
<p  id="date"></p>
<!--DATE-->
<script>
var d = new Date();
document.getElementById("date").innerHTML = d.toDateString();
</script>

<p  id="time"></p>
<p id="date" align="left"></p>
<script>
//Dynamic Timer
  function checkTime(i) {
if (i < 10) {
  i = "0" + i;
}
return i;
}

function startTime() {
var today = new Date();
var h = today.getHours();
var m = today.getMinutes();
var s = today.getSeconds();
// add a zero in front of numbers<10
m = checkTime(m);
s = checkTime(s);
document.getElementById('time').innerHTML = h + ":" + m + ":" + s;
t = setTimeout(function() {
  startTime()
}, 500);
}
startTime();
</script>



<div id="aceEditor" >
  &lt;&gt;Welcome to the online code editor.
  It supports html, css and javascript.
  Below is an example-starter code you can edit.
  
  
  
&lt;!--example--&gt;

&lt;head&gt;
  &lt;script&gt;
  function play(){
          var audio = new Audio('https://freesound.org/data/previews/338/338986_5106192-lq.mp3');
          audio.play();
        }

  &lt;/script&gt;
  &lt;style&gt;
  pre{
  background-color: rgba(255,255,255,0.8);
  max-width: 45%;
  margin-left: 20px;
  }
  body {
    font-family:monospace;
    font-style: normal;
    font-variant: normal;
    font-size:13.3px;
  }
  @-webkit-keyframes change {
    0% { transform: scale(1); }
    50% { transform: scale(2); }
    100% { transform: scale(1); }

  }
  @-webkit-keyframes change1 {
    0%, 12.66%, 100% { transform: translate3d(0, 0, 0); }
    16.66%, 29.32% { transform: translate3d(0, 155%, 0); }
    33.32%,45.98% { transform: translate3d(0, 550%, 0); }
    49.98%,62.64% { transform: translate3d(0, 1500%, 0); }
    66.64%,79.3% { transform: translate3d(0, 550%, 0); }
    83.3%,95.96% { transform: translate3d(0, 155%, 0); }
  }
  h1{
    font-size: 35px;
    animation: change 60s infinite;
    margin-top: 50px;
    color: white;
    font-family: courier new;
    z-index: 100;
  }
  h1:hover {
    font-size: 35px;
    color: black;
    animation: change 60s infinite;
    margin-top: 50px;
  }
  p{
    animation: change1 10s infinite;
    position: relative;
    font-family: courier new;

  }


  #bg {
    position: absolute;
    top: 0%;
    z-index: -1;
    width: 100%;
    height: 100%;
  }
  &lt;/style&gt;
&lt;/head&gt;
&lt;div style="width:100%;height:100%;"&gt;
&lt;h1 id="heading" onmouseenter="play()" align="center" &gt;How are you &lt;a style="color:cyan"&gt; today?&lt;/a&gt; &lt;/h1&gt;

  &lt;p align="center" style="color:white;margin-left: 15%" &gt; HTML IDE-v2.1 &lt;/p&gt;
 
  &lt;img id="bg" src="https://4.bp.blogspot.com/-qoEahTAjQEg/Ud6FKsRRRnI/AAAAAAAABPU/X71q5Kig3Vk/s1600/Sky+Anime+Landscape+36.png"/&gt;

 &lt;pre&gt; 
  The web app is made for creating HTML 
  elements and CSS animations, 
  it does also support JS with
  some restrictions.

  Delete this text and write your html 
  here for syntax highlighting and correction
  then copy and paste it below and click
  the button to render, or to refresh
  your code.
  
  
  Try to resize the two windows to scale 
  the content by grabbing them 
  by their right-bottom corner.
 
&lt;/pre&gt;



&lt;/div&gt;





















</div>









<script>
//*******PUBLISH FUNCTION*******
 let appended = false;
 function publish(){
    x = document.getElementById("name").value;
    y = document.getElementById("time").innerHTML;
    z = document.getElementById("date").innerHTML;
    document.getElementById("out").innerHTML = 'by ' + x + '\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0' + 'submited at: ' + y + ' ' + 'on: ' + z;
    q = document.getElementById("desc").value;
    document.getElementById("descout").innerHTML = q;
    let rect = document.getElementById('rect');
    rect.setAttribute("style", "background-color: white; width: 2%; height: 10.1%; position: absolute; top: 152%; left: 2%;");

    if (appended == false) {
    let addFrame = document.createElement('iframe');

    addFrame.style.cssText = 'position:absolute;width:100%;height:100%;left:0px; top:167%; z-index:110; overflow: scroll; border: 1px solid white';
    addFrame.id = "boxr";
    let moveOne = document.getElementById('entries');
    let moveTwo = document.getElementById('archive');
    let moveThree = document.getElementById('descarch');
    moveThree.style.cssText = "top:295%;"
    moveOne.style.cssText = "top:275%;"
    moveTwo.style.cssText = "top:310%;"
    document.body.appendChild(addFrame);
    };

    let inp     = document.getElementById("box1");
    let publication     = document.getElementById("boxr");
  	let data = `
  <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
  <foreignObject width="100%" height="100%">
  <div xmlns="http://www.w3.org/1999/xhtml"
  style="font-family:monospace;font-style: normal; font-variant: normal; font-size:13.3px;padding:2px;">
  ${inp.value}
  </div>
  </foreignObject>
  </svg>`;
  	var blob = new Blob( [data], {type:'image/svg+xml'} );
  	var url=URL.createObjectURL(blob);
    publication.src= url;
    appended = true;
    console.log(url);
    //console.log(appended);

    //alert to be changed with nice styled div
    alert('Your code have been submited, it will be checked by the admin and uploaded shortly, thank you! below is the full screen preview of what you prepared!');

    //change the format of the sent data ...
    var datax = new FormData();
    datax.append("datax" , '<!--' + 'by ' + x + ' ' + 'submited at: ' + y + ' ' + 'on: ' + z + ' ' + q +'-->' + inp.value  );
    var xhr = new XMLHttpRequest();
    xhr.open( 'post', '/post.php', true );
    xhr.send(datax);
    //console.log(datax);


  }




</script>

<script>
//Full screen preview function
 function preview(){

    x = document.getElementById("name").value;
    y = document.getElementById("time").innerHTML;
    z = document.getElementById("date").innerHTML;
    document.getElementById("out").innerHTML = 'by ' + x + '\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0' + 'submited at: ' + y + ' ' + 'on: ' + z;
    q = document.getElementById("desc").value;
    document.getElementById("descout").innerHTML = q;
    let rect = document.getElementById('rect');
    rect.setAttribute("style", "background-color: white; width: 2%; height: 10.1%; position: absolute; top: 152%; left: 2%;");
    
    
   
    if (appended == false) {
    let addFrame = document.createElement('iframe');

    addFrame.style.cssText = 'position:absolute;width:100%;height:100%;left:0px; top:167%; z-index:110; overflow: scroll; border: 1px solid white';
    addFrame.id = "boxr";
    let moveOne = document.getElementById('entries');
    let moveTwo = document.getElementById('archive');
    let moveThree = document.getElementById('descarch');
    moveOne.style.cssText = "top:275%;"
    moveTwo.style.cssText = "top:310%;"
    moveThree.style.cssText = "top:295%;"
    document.body.appendChild(addFrame);
    };

    let inp     = document.getElementById("box1");
    let publication = document.getElementById("boxr");
  	let data = `
  <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
  <foreignObject width="100%" height="100%">
  
  </foreignObject>
  </svg>`;
  	var blob = new Blob( [data], {type:'image/svg+xml'} );
  	var url=URL.createObjectURL(blob);
    publication.src= url;
    appended = true;
    console.log(url);
    //console.log(appended);
  };





</script>

<script src="https://ajaxorg.github.io/ace-builds/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/twilight");
    editor.session.setMode("ace/mode/html");
</script>

<button style="position:fixed" id="b2" onclick="render()"  >build
</button>
<div id="output"> </div>

<!-- CODE RENDER IFRAME - OUTPUT1-->
<iframe frameborder="0" id="box" draggable="true">
</iframe>

<!-- USER INPUT - USER CODE -->
<textarea id="box1" style="visibility:hidden" draggable="true">

  




</textarea>





<!-- CODE ARCHIVES - ENTRIES SECTION -->


<!-- automate the addition of iframes into the div /php -->


</body>
</html>
