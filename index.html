
<!DOCTYPE html>
<html lang="en">
<head>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Coding Platform</title>
  <link rel="shortcut icon" type="image/png" href="https://theturtle.gr/wp-content/uploads/2019/11/htmllogo.png"/>
  <link rel="stylesheet" type="text/css" href="/style.css"/>
  
  <script>


 // RENDER FUNCTION - upper right window
  function render(){
  	var inp     = document.getElementById("box1");
    var output     = document.getElementById("box");
  	var data = `
  <svg xmlns="http://www.w3.org/2000/svg" width="${inp.offsetWidth*1.5}" height="${inp.offsetHeight*1.5}">
  <foreignObject width="100%" height="100%">
  <div xmlns="http://www.w3.org/1999/xhtml">
  ${inp.value}
  </div>
  </foreignObject>
  </svg>`;
  	var blob = new Blob( [data], {type:'image/svg+xml'} );
  	var url=URL.createObjectURL(blob);
  	output.src= url;
    console.log(url);



 // ResizeObserver
   }
   onload=function(){
    render();
    ro = new ResizeObserver(render);
  	ro.observe(document.getElementById("box1"));

   }


  </script>
</head>
<body>
<p  id="date"></p>
<!--DATE-->
<script>
var d = new Date();
document.getElementById("date").innerHTML = d.toDateString();
</script>

<p  id="time"></p>
<p id="date" align="left"></p>
<script>
//Dynamic Timer
  function checkTime(i) {
if (i < 10) {
  i = "0" + i;
}
return i;
}

function startTime() {
var today = new Date();
var h = today.getHours();
var m = today.getMinutes();
var s = today.getSeconds();
// add a zero in front of numbers<10
m = checkTime(m);
s = checkTime(s);
document.getElementById('time').innerHTML = h + ":" + m + ":" + s;
t = setTimeout(function() {
  startTime()
}, 500);
}
startTime();
</script>



<div id="editor" style="background-color: rgb(19, 19, 19);">
<pre id="editor" style="color:white">
  The program is made for creating HTML elements and CSS animations, it does also support JS.

  Delete this text and write your html here for syntax highlighting and correction or in the left-top section for execution,
  you can also drag and drop the selected code between windows. To refresh the render press the button at top-left.
  Try to resize the top windows to scale the content by grabbing them by their right-bottom corner.
  Below the editor you will find the publishing interface, where you can submit the description of your code, your nickname,
  launch a full screen preview, and send the code for publication on the page.

</pre>
</div>









<script>
//*******PUBLISH FUNCTION*******
 let appended = false;
 function publish(){
    x = document.getElementById("name").value;
    y = document.getElementById("time").innerHTML;
    z = document.getElementById("date").innerHTML;
    document.getElementById("out").innerHTML = 'by ' + x + '\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0' + 'submited at: ' + y + ' ' + 'on: ' + z;
    q = document.getElementById("desc").value;
    document.getElementById("descout").innerHTML = q;
    let rect = document.getElementById('rect');
    rect.setAttribute("style", "background-color: white; width: 2%; height: 10.1%; position: absolute; top: 152%; left: 2%;");

    if (appended == false) {
    let addFrame = document.createElement('iframe');

    addFrame.style.cssText = 'position:absolute;width:100%;height:100%;left:0px; top:167%; z-index:110; overflow: scroll; border: 1px solid white';
    addFrame.id = "boxr";
    let moveOne = document.getElementById('entries');
    let moveTwo = document.getElementById('archive');
    let moveThree = document.getElementById('descarch');
    moveThree.style.cssText = "top:295%;"
    moveOne.style.cssText = "top:275%;"
    moveTwo.style.cssText = "top:310%;"
    document.body.appendChild(addFrame);
    };

    let inp     = document.getElementById("box1");
    let publication     = document.getElementById("boxr");
  	let data = `
  <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
  <foreignObject width="100%" height="100%">
  <div xmlns="http://www.w3.org/1999/xhtml"
  style="font-family:monospace;font-style: normal; font-variant: normal; font-size:13.3px;padding:2px;">
  ${inp.value}
  </div>
  </foreignObject>
  </svg>`;
  	var blob = new Blob( [data], {type:'image/svg+xml'} );
  	var url=URL.createObjectURL(blob);
    publication.src= url;
    appended = true;
    console.log(url);
    //console.log(appended);

    //alert to be changed with nice styled div
    alert('Your code have been submited, it will be checked by the admin and uploaded shortly, thank you! below is the full screen preview of what you prepared!');

    //change the format of the sent data ...
    var datax = new FormData();
    datax.append("datax" , '<!--' + 'by ' + x + ' ' + 'submited at: ' + y + ' ' + 'on: ' + z + ' ' + q +'-->' + inp.value  );
    var xhr = new XMLHttpRequest();
    xhr.open( 'post', '/post.php', true );
    xhr.send(datax);
    //console.log(datax);


  }




</script>

<script>
//Full screen preview function
 function preview(){

    x = document.getElementById("name").value;
    y = document.getElementById("time").innerHTML;
    z = document.getElementById("date").innerHTML;
    document.getElementById("out").innerHTML = 'by ' + x + '\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0' + 'submited at: ' + y + ' ' + 'on: ' + z;
    q = document.getElementById("desc").value;
    document.getElementById("descout").innerHTML = q;
    let rect = document.getElementById('rect');
    rect.setAttribute("style", "background-color: white; width: 2%; height: 10.1%; position: absolute; top: 152%; left: 2%;");

    if (appended == false) {
    let addFrame = document.createElement('iframe');

    addFrame.style.cssText = 'position:absolute;width:100%;height:100%;left:0px; top:167%; z-index:110; overflow: scroll; border: 1px solid white';
    addFrame.id = "boxr";
    let moveOne = document.getElementById('entries');
    let moveTwo = document.getElementById('archive');
    let moveThree = document.getElementById('descarch');
    moveOne.style.cssText = "top:275%;"
    moveTwo.style.cssText = "top:310%;"
    moveThree.style.cssText = "top:295%;"
    document.body.appendChild(addFrame);
    };

    let inp     = document.getElementById("box1");
    let publication = document.getElementById("boxr");
  	let data = `
  <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
  <foreignObject width="100%" height="100%">
  <div xmlns="http://www.w3.org/1999/xhtml"
  style="font-family:monospace;font-style: normal; font-variant: normal; font-size:13.3px;padding:2px;">
  ${inp.value}
  </div>
  </foreignObject>
  </svg>`;
  	var blob = new Blob( [data], {type:'image/svg+xml'} );
  	var url=URL.createObjectURL(blob);
    publication.src= url;
    appended = true;
    console.log(url);
    //console.log(appended);
  };





</script>

<script src="https://ajaxorg.github.io/ace-builds/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/twilight");
    editor.session.setMode("ace/mode/html");
</script>

<button id="b2" onclick="render()"  >paste below & click to run!
You can prepare your code in the bottom section.</button>
<div id="output"> </div>

<!-- CODE RENDER IFRAME - OUTPUT1-->
<iframe frameborder="0" id="box" draggable="true">
</iframe>

<!-- USER INPUT - USER CODE -->
<textarea id="box1" draggable="true">

<!--example-->
<html>
<head>
  <script>
  function play(){
          var audio = new Audio('https://freesound.org/data/previews/338/338986_5106192-lq.mp3');
          audio.play();
        }

  </script>
  <style>
  body {
    font-family:monospace;
    font-style: normal;
    font-variant: normal;
    font-size:13.3px;
  }
  @-webkit-keyframes change {
    0% { transform: scale(1); }
    50% { transform: scale(2); }
    100% { transform: scale(1); }

  }
  @-webkit-keyframes change1 {
    0%, 12.66%, 100% { transform: translate3d(0, 0, 0); }
    16.66%, 29.32% { transform: translate3d(0, 155%, 0); }
    33.32%,45.98% { transform: translate3d(0, 550%, 0); }
    49.98%,62.64% { transform: translate3d(0, 1500%, 0); }
    66.64%,79.3% { transform: translate3d(0, 550%, 0); }
    83.3%,95.96% { transform: translate3d(0, 155%, 0); }
  }
  h1{
    font-size: 35px;
    animation: change 60s infinite;
    margin-top: 50px;
    color: white;
  }
  h1:hover {
    font-size: 35px;
    color: black;
    animation: change 60s infinite;
    margin-top: 50px;
  }
  p{
    animation: change1 10s infinite;
    position: relative;

  }


  #bg {
    position: absolute;
    top: 0%;
    z-index: -1;
    width: 100%;
    height: 100%;
  }
  </style>
</head>
<body style="width:100%;height:100%;">
<h1 id="heading" onmouseenter="play()" align="center" >How are you <a style="color:cyan"> today?</a> </h1>

  <p align="center" style="color:white" > HTML IDE-v2.1 </p>
  <p align="center" style="color:white" >Welcome to our little HTML editor</p>
  <p align="center" style="color:white" >Feel free to play around with the code :) </p>
  <p align="center" style="color:white" >Don't forget to publish your code! </p>
  <img id="bg" src="https://4.bp.blogspot.com/-qoEahTAjQEg/Ud6FKsRRRnI/AAAAAAAABPU/X71q5Kig3Vk/s1600/Sky+Anime+Landscape+36.png"/>

</body>

</html>

</textarea>





<!-- CODE ARCHIVES - ENTRIES SECTION -->


<!-- automate the addition of iframes into the div /php -->


</body>
</html>
